(function(){var map;function is_fullscreen(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen;}
function enable_fullscreen(map){var s3=map.s3;s3.westPanelContainer.removeAll(false);s3.mapPanelContainer.removeAll(false);var mapWin=s3.mapWin;mapWin.items.items=[];mapWin.doLayout();mapWin.destroy();S3.gis.addMapWindow(map);if(document.body.requestFullScreen){document.body.requestFullScreen();}else if(document.body.webkitRequestFullScreen){document.body.webkitRequestFullScreen();}else if(document.body.mozRequestFullScreen){document.body.mozRequestFullScreen();}
var map_id=s3.id;$('#'+map_id).addClass('fullscreen');}
function disable_fullscreen(map){var s3=map.s3;s3.westPanelContainer.removeAll(false);s3.mapPanelContainer.removeAll(false);var mapWin=s3.mapWin;mapWin.items.items=[];mapWin.doLayout();mapWin.destroy();S3.gis.addMapPanel(map);var map_id=s3.id;$('#'+map_id).removeClass('fullscreen');}
$('.gis_fullscreen_map-btn').click(function(evt){if(navigator.appVersion.indexOf('MSIE')!=-1){return;}else{var map_id;var attributes=this.attributes;for(var i=0;i<attributes.length;i++){if(attributes[i].name=='map'){map_id=attributes[i].value;break;}}
if(undefined==map_id){map_id='default_map';}
map=S3.gis.maps[map_id];enable_fullscreen(map);evt.preventDefault();}});$('body').bind('webkitfullscreenchange',function(){if(!is_fullscreen())
disable_fullscreen(map);});$(document).bind('mozfullscreenchange',function(){if(!is_fullscreen())
disable_fullscreen(map);});$('body').bind('webkitfullscreenchange',function(){if(!is_fullscreen())
disable_fullscreen(map);});}());